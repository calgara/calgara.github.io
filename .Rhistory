domain = cd114$aldmck_ideal_pt_district.2018
)
map3 <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(data = cd114,
fillColor = ~pal(cd114$aldmck_ideal_pt_district.2018),
color = "#b2aeae", # you need to use hex colors
fillOpacity = 0.7,
weight = 1,
smoothFactor = 0.2,
popup = popup) %>%
addLegend(pal = pal,
values = cd114$aldmck_ideal_pt_district.2018,
position = "bottomright",
title = "Estimated District Ideology (2018)")#,
#labFormat = labelFormat(suffix = "%"))
map3
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
cd114 <- congressional_districts(cb = T, resolution = '20m')
x <- read.csv("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/state_fips_master.csv")
x <- subset(x,select=c(fips,state_abbr))
x$fips <- as.character(x$fips)
x$fips[x$fips == "1"] <- "01"
x$fips[x$fips == "2"] <- "02"
x$fips[x$fips == "3"] <- "03"
x$fips[x$fips == "4"] <- "04"
x$fips[x$fips == "5"] <- "05"
x$fips[x$fips == "6"] <- "06"
x$fips[x$fips == "7"] <- "07"
x$fips[x$fips == "8"] <- "08"
x$fips[x$fips == "9"] <- "09"
colnames(x) <- c("STATEFP","state")
x$state <- as.character(x$state)
#x <- subset(x,x$state != "AK")
#x <- subset(x,x$state != "HI")
cd114 <- subset(cd114,cd114$STATEFP %in% unique(x$STATEFP))
plot(cd114)
popup <- paste0("State: ", cd114$STATEFP)
leaflet(cd114) %>%
addTiles() %>%
addPolygons(popup=popup)
setwd("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp")
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
cd114 <- geo_join(cd114, x, "STATEFP","STATEFP")
cd114$district <- paste(cd114$state,cd114$CD115FP,sep="")
cd114$district  <- gsub("00","1",cd114$district )
cd114$district  <- gsub("01","1",cd114$district )
cd114$district  <- gsub("02","2",cd114$district )
cd114$district  <- gsub("03","3",cd114$district )
cd114$district  <- gsub("04","4",cd114$district )
cd114$district  <- gsub("05","5",cd114$district )
cd114$district  <- gsub("06","6",cd114$district )
cd114$district  <- gsub("07","7",cd114$district )
cd114$district  <- gsub("08","8",cd114$district )
cd114$district  <- gsub("09","9",cd114$district )
popup <- paste0("District: ", cd114$district)
leaflet(cd114) %>%
addTiles() %>%
addPolygons(popup=popup)
x <- plot_states_data[,c(1,14:73)]
x$geometry <- NULL
x <- subset(x,x$district %in% cd114$district)
y <- data.frame(district=cd114$district,GEOID=cd114$GEOID)
x <- merge(x,y,by=c("district"))
x$district <- NULL
x$GEOID <- as.character(x$GEOID)
cd114$GEOID <- as.character(cd114$GEOID)
cd114 <- cd114[order(cd114$GEOID),]
x <- x[order(x$GEOID),]
x$placement.mc_libcon_placement_re.2018[x$GEOID == "4001"] <- NA
cd114 <- geo_join(cd114, x, "GEOID","GEOID")
cd114$cong_approval.2018 <- cd114$cong_approval.2018 * 100
cd114 <- cd114[order(cd114$GEOID),]
cd114$pres_approval.2018 <- cd114$pres_approval.2018 * 100
cd114$member_approval_rating.2018 <- cd114$member_approval_rating.2018 * 100
popup <- paste0("District: ", cd114$district_mc_name.2018 , "<br>", "Congressional District Approval: ", paste(round(cd114$cong_approval.2018,2),"%",sep=""))
pal <- colorNumeric(
palette = "OrRd", #YlGnBu
domain = cd114$cong_approval.2018
)
map3 <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(data = cd114,
fillColor = ~pal(cd114$cong_approval.2018),
color = "#b2aeae", # you need to use hex colors
fillOpacity = 0.7,
weight = 1,
smoothFactor = 0.2,
popup = popup) %>%
addLegend(pal = pal,
values = cd114$cong_approval.2018,
position = "bottomright",
title = "Estimated District Congressional Approval (2018)",
labFormat = labelFormat(suffix = "%"))
map3
library(RColorBrewer)
display.brewer.all()
library(htmlwidgets)
library(htmltools)
tag.map.title <- tags$style(HTML("
.leaflet-control.map-title {
transform: translate(-50%,20%);
position: fixed !important;
left: 50%;
text-align: center;
padding-left: 10px;
padding-right: 10px;
background: rgba(255,255,255,0.75);
font-weight: bold;
font-size: 14px;
}
"))
title <- tags$div(
tag.map.title, HTML("Aldrich-McKelvey Liberal-Conservative Legislator Ideological Ideal Point")
)
popup <- paste0("District: ", cd114$district_mc_name.2018 , "<br>", "Legislator Ideological Preferences: ", paste(round(cd114$placement.mc_libcon_placement_re.2018,2),sep=""))
pal <- colorNumeric(
palette = rev(brewer.pal(11,"RdYlBu")), #YlGnBu
domain = cd114$placement.mc_libcon_placement_re.2018
)
map3 <- leaflet(width="800px", height="400px") %>% #width = "100%"
addProviderTiles("CartoDB.Positron") %>%
#addControl(title, position = "topleft", className="map-title") %>%
setView(lng = -93.5, lat = 39.50, zoom = 04.49) %>% #lng = -98.5, lat = 39.50
addPolygons(data = cd114,
fillColor = ~pal(cd114$placement.mc_libcon_placement_re.2018),
color = "#b2aeae", # you need to use hex colors
fillOpacity = 0.7,
weight = 1,
smoothFactor = 0.2,
popup = popup) %>%
addLegend(pal = pal,
values = cd114$placement.mc_libcon_placement_re.2018,
position = "bottomright",
na.label = "Vacant",
title = "Aldrich-McKelvey Estimated <br> Liberal-Conservative Ideology <br> (2018)")#,
#labFormat = labelFormat(suffix = "%"))
map3
css_fix <- "div.info.legend.leaflet-control br {clear: both; clear: both;}"
map3 <- map3 %>% prependContent(tags$style(type = "text/css", css_fix))
map3 <- frameWidget(map3)
save.image("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
saveWidget(map3, file="legislator_ideology_2018.html")
map3
</center><br/>
<center> **The Conditioning Role of Polarization in U.S. Senate Election Outcomes: A Direct-Election Era & Voter-Level Analysis** </center><br/>
<center> ***$\star$[Manuscript Published in Electoral Studies (2019)](https://www.sciencedirect.com/science/article/pii/S0261379418301379) $\star$[Publication Link](https://www.sciencedirect.com/science/article/pii/S0261379418301379) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
<center> ***$\star$[Research featured in Invited LegBranch Blog Post: The National Tide Falls Short in the U.S. Senate (March 19, 2019)](http://bit.ly/2JpdHZt)$\star$***
</center><br/>
*Abstract:*	Recent work finds that a decline in the incumbency advantage coincides with the rise of partisanship as a determinant of congressional electoral outcomes. While this work updates our view of congressional elections, it is unclear if this holds in the more candidate-centered and high-information electoral context of the U.S. Senate. In this paper, I address these two considerations by evaluating a theory positing that polarization conditions the influence of incumbency and partisanship as Senate election determinants. Using data on the entire direct-election Senate era and survey data, this paper finds that: (1) polarization provides a partisan advantage for candidates running in states in which they are members of the partisan majority and (2) polarization positively conditions the incumbency advantage for Senators representing states that favor the other party. These findings suggest that Senators may still successfully cultivate a personal brand in the face of growing ideological differences between the parties.
<br/>
<br/>
<center>
*Distribution of 2016 Federal Election Candidate Positions* <br>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/candidate_stimuli_placements_lines.png "House & Senate Candidate Positions"){ width=60% }
</center><br/>
<center> **The Distorting Effects of Racial Animus on Proximity Voting in the 2016 Elections** </center>
<center> **with Isaac Hale, PhD Candidate, University of California, Davis** </center><br/>
<center> ***$\star$[Manuscript Published in Electoral Studies (2019)](https://www.sciencedirect.com/science/article/pii/S0261379418302774) $\star$[Publication Link](https://www.sciencedirect.com/science/article/pii/S0261379418302774) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)***</center><br/>
<center> ***$\star$[Research featured in The New York Times (Feb. 27, 2019): The Deepening `Racialization' of American Politics](https://www.nytimes.com/2019/02/27/opinion/trump-obama-race.html)$\star$***
</center><br/>
<center> ***$\star$[Research featured in Pacific Standard (April 8, 2019): Trump's Racist Remarks Helped Boost Down-Ballot GOP in 2016](https://psmag.com/news/trumps-racist-remarks-helped-down-ballot-gop-candidates-in-2016)$\star$***
</center><br/>
*Abstract:* While the use of racial appeals by the 2016 Trump campaign is indisputable, researchers are actively debating their precise role in influencing voter behavior in the election. We seek to expand upon existing research which finds that racial animus electorally benefited the Trump campaign. We examine to what extent those benefits redounded to GOP candidates down-ballot and whether racial animus distorted ideological proximity voting in the 2016 election. We find that racial animus among voters helped Republicans at multiple ballot levels and that higher levels of racial animus distorted correct proximity voting among voters ideologically closest to the Democratic candidate. Our findings suggest that high salience campaign appeals on race at the presidential level can influence elections for the House and Senate. We also provide evidence that the process of racial partisan realignment is incomplete, as some white voters still vote incongruously with their ideology due to racial animus.
<br/>
<br/>
<center>
*Average Country World Wide Web Information Networks, 9/1/2015 - 1/30/2017*<br>
<br/>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/third_quartile_graph_fullnetwork_color.png "Country Network"){ width=60% }
</center><br/>
<center> **Diachronic Equivalence: An Examination of the International News Network** </center>
<center> **with [George Barnett](http://communication.ucdavis.edu/people/gbarnett), Distinguished Professor of Communications, University of California, Davis** </center><br/>
<center> ***$\star$[Manuscript Published in Social Network Analysis & Mining (2019)](https://link.springer.com/article/10.1007/s13278-019-0549-y) $\star$[Publication Link](https://link.springer.com/article/10.1007/s13278-019-0549-y) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
*Abstract:* Barabási (2014) argues that a significant proportion of nodes can be randomly removed from any scale-free network without it breaking apart. Gao, Barzel and Barabási (2016) suggest that three additional properties of networks, density, heterogeneity and symmetry, facilitate their ability to adjust their activities to retain functionality in times of stress.  Barnett and Jiang (2016) examined the World Wide Web and found that while there are changes in the use of individual websites in this scale-free network due to weekly cycles in viewing specific websites, extreme events as well as other social and cultural events, the overall network is remarkably stable. This paper suggests an additional property, the structural equivalence of nodes that facilitates network stability.  Further, it differentiates between two forms of equivalence, synchronous or structural equivalence, and diachronic equivalence, which indicates that two nodes’ position in a network change over time in a similar manner. A subset of the World Wide Web, the international news network is examined to demonstrate these notions. Daily data on the use of the world’s 44 most frequently visited news websites by 118 countries were mined over the 17 month period September 1, 2015 to January 30, 2017, to create a longitudinal two-mode network (countries and websites).  The results suggest that individual structurally and diachronic equivalent nodes may be removed from both the international and website networks without impacting how the network changes over time.
<br/>
<br/>
<center>
*Item Characteristic Curves of Latent Scientific Knowledge*<br>
<br/>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/scientific_knowledge_irt_curves.png "IRT Curves"){ width=60% }
</center><br/>
<center> **The Conditional Effects of Scientific Knowledge & Gender on Support for COVID-19 Government Containment Policies in a Partisan America** </center>
<center> **with [Sam Fuller](http://ps.ucdavis.edu), PhD Candidate, Political Science, University of California, Davis** </center>
<center> **& [Christopher Hare](http://www.christopherdhare.com), Assistant Professor of Political Science, University of California, Davis** </center><br/>
<center> ***$\star$[Manuscript Published in Politics & Gender (2020)](https://www.cambridge.org/core/journals/politics-and-gender/article/conditional-effects-of-scientific-knowledge-gender-on-support-for-covid19-government-containment-policies-in-a-partisan-america/C4AEB27D4046433749A883941AC74809) $\star$[Publication Link](https://www.cambridge.org/core/journals/politics-and-gender/article/conditional-effects-of-scientific-knowledge-gender-on-support-for-covid19-government-containment-policies-in-a-partisan-america/C4AEB27D4046433749A883941AC74809) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
<center> ***$\star$[Research accepted for Politics & Gender as part of the Cambridge Coronavirus Collection](https://www.cambridge.org/core/journals/politics-and-gender/virtual-special-issues/gender-politics-and-the-global-pandemic)$\star$***
</center><br/>
*Abstract:* With the onset of the 2020 COVID-19 pandemic in the United States, many state and local governments were forced to implement necessary policies to contain transmission of the deadly virus. These policies ranged from closing most businesses to more controversial proposals, such as postponing primary elections. In this research note, we examine the role scientific knowledge and gender played in citizen perceptions of these virus containment policies both in the general population and among partisans. We find that while a gender gap persists in scientific knowledge, both in the general population and within the parties, women are generally more likely to use this knowledge to inform their policy views on necessary government action during the COVID-19 pandemic. These findings shed light on how knowledge and gender intersect to drive support for government intervention during the time of a severe public health crisis in a partisan America.
<br/>
<br/>
<center>
*Bivariate Relationship between Subnational Racial Resentment & GOP Vote Shares* <br>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/scatterplots_aggregate.png "Scatterplots"){ width=70% }
</center><br/>
<center> **White Racial Resentment & Political Cross-Pressures in Nationalized Elections: The Case of the Republican Coalition in the Trump Era** </center>
<center> **with Isaac Hale, Associate Instructor, University of California, Davis** </center><br/>
<center> ***$\star$Manuscript Invited to Revise & Resubmit at Electoral Studies $\star$[Working Manuscript Draft](Algara_Hale_RR_2016_2018.pdf) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
<center> ***$\star$[Research featured in The Sacramento Bee (July 19, 2019): White Racial Resentment is a Winning Republican Strategy, this Political Scientist Says](https://tinyurl.com/y5vrkrxb)$\star$***
</center><br/>
<center> ***$\star$[Research featured in The Sacramento Bee (July 24, 2019): Trump's strategy of racial resentment won't work in California](https://tinyurl.com/y3ssqw3y)$\star$***
</center><br/>
<center> ***$\star$[Research featured in Roll Call (August 12, 2019): California Republican backtracks, but episode could foreshadow his 2020 strategy](https://tinyurl.com/y6bnqp6o)$\star$***
</center><br/>
<center> ***$\star$[Research featured in Political Science Now APSA Blog (July 22, 2020): Will Trump & Congressional Republicans Benefit from White Racial Attitudes in 2020?](https://politicalsciencenow.com/will-trump-congressional-republicans-benefit-from-white-racial-attitudes-in-2020/)$\star$***
</center><br/>
*Abstract:* While scholars have found that Trump was able to capitalize on the racial attitudes of white voters, it is less clear how these racial attitudes influence vote-choice across partisan and ideological cleavages in the electorate. It is also unclear whether racial attitudes affected voting at the congressional level or electoral outcomes at the aggregate level. Using a novel measure of racial attitudes at the subnational level and survey data, we make three clear findings: (1) Trump and Republican congressional candidates benefited from racial attitudes both at the aggregate level and among white voters, (2) this electoral benefit for Republicans persisted during the 2018 midterm elections, and (3) the effect of attitudes on vote-choice did not significantly vary across partisan and ideological cleavages in the white electorate. Our findings suggest that, even during the era of highly nationalized and partisan elections, racial attitudes are still a mechanism by which Republicans can win significant electoral support among Democrats and relatively liberal voters in the white electorate. These findings have implications for the growing salience of race in the Republican electoral coalition.
<br/>
<br/>
<center>
*Quarterly Job Approval of the U.S. Congress, 1974-2016* <br>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/cong_approval_aggregate_annotated.png "Quarterly Approval"){ width=65% }
</center><br/>
<center> **The "Collective Congress" on the Ballot? A Voter & Aggregate Level Analysis of Collective Responsibility in Congressional Elections** </center><br/>
<center> ***$\star$[Manuscript Forthcoming at Congress & the Presidency]() $\star$ <br/> [Publication Link]() $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
*Abstract:* The traditional view among scholars is that voters do not weigh congressional job performance in their congressional voting decisions. Recent work challenges this notion and provides evidence that congressional job approval matters at the ballot box. However, scholars are divided as to which party benefits from positive job approval ratings. Moreover, the literature is unclear regarding the conditions under which voters hold individual candidates accountable for the collective performance of Congress. Analyzing individual and aggregate level data, this study produces several key findings: (1) assessments of congressional job performance are directly tied to the electoral standing of the majority party; (2) positive approval ratings raise the level of support for majority party candidates among minority partisans and those closest to the minority in ideological proximity; (3) majority party incumbents gain more from congressional approval than non-incumbents and suffer less of a loss from congressional disapproval; (4) the impact of congressional approval on majority party fortunes is conditioned by how cohesive the majority party is. These findings provide a clearer narrative of how collective accountability works in congressional elections and the incentives for majority and minority party behavior in the contemporary Congress.
<br/>
<br/>
<center>
*Perceptual & Roll-Call Based Ideal Points by Self-Placements* <br>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/citizens_ideal_pts_scatter.png "Ideal Point Validation"){ width=60% }
</center><br/>
<center> **The Partisan & Ideological Determinants of Citizen Congressional Approval** </center><br/>
<center> ***$\star$ Manuscript Invited to Revise & Resubmit at Political Behavior $\star$ <br/> [Working Manuscript Draft](Policy_Component_of_Approval.pdf) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
*Abstract:* Do citizens weigh the ideological nature of collective representation provided by Congress when assessing the job performance of their national legislature? While recent aggregate-level work suggests that congressional approval rises when Congress responds to the ideological preferences of the mass public, individual-level models posit that approval is a function of partisanship or valence considerations, with little consideration for policy. I fill this disconnect between two lines of research by presenting a model arguing that citizens weigh the ideological representation provided by their Congress in the face of two contrasting options of collective ideological representation in the responsible party government era. Using cross-sectional and panel survey data which allow for scaling citizens and the congressional parties in the same ideological space, I find that majority co-partisans and citizens closer in ideological proximity to the governing majority are more likely to approve of Congress. I also find that this the relationship between ideological proximity and approval is independent of partisanship. These findings have implications for the capacity of citizens to assess the collective representation of the chief policy-making institution of their national government.
<br/>
<br/>
<center>
*Distribution of Ideological Divergence between District & Partisan Medians* <br>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/median_partisan_divergence_by_chamber.png "District-Member Divergence"){ width=50% }
</center><br/>
<center> **Legislative Signaling or Random Error? An Analysis of Spatially Incorrect Voting in Congress** </center>
<center> **with Joe Zamadics, PhD, University of Colorado, Boulder** </center><br/>
<center> ***$\star$Manuscirpt Invited to Revise & Resubmit at the Journal of Legislative Studies $\star$[Working Manuscript Draft](Congressional_Incorrect_voting_Algara_Zamadics.pdf) $\star$[Manuscript Data Materials](mailto:caalgara@utep.edu)*** </center><br/>
*Abstract:* Theoretical and empirical models of congressional voting assumes that legislators vote with the sole purpose to move policy closer to their ideologically ideal point, with the most prominent being the NOMINATE model. While NOMINATE correctly classifies the vast majority of votes cast by members of Congress, a significant number of votes are misclassified and coded as spatial error. The literature on congressional voting assumes this error to be random and idiosyncratic across members. We dispute this conventional notion and argue that spatial error in congressional is not random, but rather systematic across members. We present a theory positing that spatial error is more likely on roll-call votes tackling salient policy issues and among members representing districts with greater ideological divergence between the median voter and the member's primary election constituency. Using Aldrich-McKelvey scaling to place legislators and constituencies in the same ideological common space, we find support for our theory. We attribute this finding to the greater electoral uncertainty faced by ideological moderates and members representing districts with greater ideological divergence between key constituencies. Our findings have implications for the NOMINATE model, the nature of spatial error in legislative voting, and the electoral cross-pressures faced by legislators.
<br/>
<br/>
<center>
*Geographic Neighborhood profile for IA-2, 114th Congress*<br>
<br/>
![alt text](/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/IA_2_map_example_of_main_iv.png "IA-2 Geo Profile"){ width=45% }
knitr::include_graphics("/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/me_hiking.jpg")
knitr::include_graphics("/Users/caalgara/Dropbox/Github_Website/calgara.github.io/figures/me_hiking.jpg")
#install.packages("rmarkdown", type = "source")
library(rmarkdown)
#touch _site.yml #"YML" file that tells your website how to assemble itself
#touch index.Rmd #Create the main rmd file
#touch about.Rmd #Create an about file
setwd("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io")
rmarkdown::render_site()
#install.packages("rmarkdown", type = "source")
library(rmarkdown)
#touch _site.yml #"YML" file that tells your website how to assemble itself
#touch index.Rmd #Create the main rmd file
#touch about.Rmd #Create an about file
setwd("/Users/caalgara/Dropbox/Github_Website/calgara.github.io")
rmarkdown::render_site()
setwd("/Users/caalgara/Dropbox/Github_Website/calgara.github.io")
rmarkdown::render_site()
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/caalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/caalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
map3
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
devtools::install_github("rstudio/leaflet.providers")
install.packages("leaflet.providers")
library(leaflet.providers)
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/caalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
map3
map3
map3
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
map3
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
map3
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/caalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
map3
map3
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
cd114 <- congressional_districts(cb = T, resolution = '20m')
x <- read.csv("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/state_fips_master.csv")
x <- subset(x,select=c(fips,state_abbr))
x$fips <- as.character(x$fips)
x$fips[x$fips == "1"] <- "01"
x$fips[x$fips == "2"] <- "02"
x$fips[x$fips == "3"] <- "03"
x$fips[x$fips == "4"] <- "04"
x$fips[x$fips == "5"] <- "05"
x$fips[x$fips == "6"] <- "06"
x$fips[x$fips == "7"] <- "07"
x$fips[x$fips == "8"] <- "08"
x$fips[x$fips == "9"] <- "09"
colnames(x) <- c("STATEFP","state")
x$state <- as.character(x$state)
#x <- subset(x,x$state != "AK")
#x <- subset(x,x$state != "HI")
cd114 <- subset(cd114,cd114$STATEFP %in% unique(x$STATEFP))
plot(cd114)
popup <- paste0("State: ", cd114$STATEFP)
leaflet(cd114) %>%
addTiles() %>%
addPolygons(popup=popup)
setwd("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp")
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
cd114 <- geo_join(cd114, x, "STATEFP","STATEFP")
cd114$district <- paste(cd114$state,cd114$CD115FP,sep="")
cd114$district  <- gsub("00","1",cd114$district )
cd114$district  <- gsub("01","1",cd114$district )
cd114$district  <- gsub("02","2",cd114$district )
cd114$district  <- gsub("03","3",cd114$district )
cd114$district  <- gsub("04","4",cd114$district )
cd114$district  <- gsub("05","5",cd114$district )
cd114$district  <- gsub("06","6",cd114$district )
cd114$district  <- gsub("07","7",cd114$district )
cd114$district  <- gsub("08","8",cd114$district )
cd114$district  <- gsub("09","9",cd114$district )
popup <- paste0("District: ", cd114$district)
leaflet(cd114) %>%
addTiles() %>%
addPolygons(popup=popup)
x <- plot_states_data[,c(1,14:73)]
x$geometry <- NULL
x <- subset(x,x$district %in% cd114$district)
y <- data.frame(district=cd114$district,GEOID=cd114$GEOID)
x <- merge(x,y,by=c("district"))
x$district <- NULL
x$GEOID <- as.character(x$GEOID)
cd114$GEOID <- as.character(cd114$GEOID)
cd114 <- cd114[order(cd114$GEOID),]
x <- x[order(x$GEOID),]
x$placement.mc_libcon_placement_re.2018[x$GEOID == "4001"] <- NA
cd114 <- geo_join(cd114, x, "GEOID","GEOID")
cd114$cong_approval.2018 <- cd114$cong_approval.2018 * 100
cd114 <- cd114[order(cd114$GEOID),]
cd114$pres_approval.2018 <- cd114$pres_approval.2018 * 100
cd114$member_approval_rating.2018 <- cd114$member_approval_rating.2018 * 100
popup <- paste0("District: ", cd114$district_mc_name.2018 , "<br>", "Congressional District Approval: ", paste(round(cd114$cong_approval.2018,2),"%",sep=""))
pal <- colorNumeric(
palette = "OrRd", #YlGnBu
domain = cd114$cong_approval.2018
)
map3 <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(data = cd114,
fillColor = ~pal(cd114$cong_approval.2018),
color = "#b2aeae", # you need to use hex colors
fillOpacity = 0.7,
weight = 1,
smoothFactor = 0.2,
popup = popup) %>%
addLegend(pal = pal,
values = cd114$cong_approval.2018,
position = "bottomright",
title = "Estimated District Congressional Approval (2018)",
labFormat = labelFormat(suffix = "%"))
map3
library(RColorBrewer)
display.brewer.all()
library(htmlwidgets)
library(htmltools)
tag.map.title <- tags$style(HTML("
.leaflet-control.map-title {
transform: translate(-50%,20%);
position: fixed !important;
left: 50%;
text-align: center;
padding-left: 10px;
padding-right: 10px;
background: rgba(255,255,255,0.75);
font-weight: bold;
font-size: 14px;
}
"))
title <- tags$div(
tag.map.title, HTML("Aldrich-McKelvey Liberal-Conservative Legislator Ideological Ideal Point")
)
popup <- paste0("District: ", cd114$district_mc_name.2018 , "<br>", "Legislator Ideological Preferences: ", paste(round(cd114$placement.mc_libcon_placement_re.2018,2),sep=""))
pal <- colorNumeric(
palette = rev(brewer.pal(11,"RdYlBu")), #YlGnBu
domain = cd114$placement.mc_libcon_placement_re.2018
)
map3 <- leaflet(width="800px", height="400px") %>% #width = "100%"
addProviderTiles("CartoDB.Positron") %>%
#addControl(title, position = "topleft", className="map-title") %>%
setView(lng = -93.5, lat = 39.50, zoom = 04.49) %>% #lng = -98.5, lat = 39.50
addPolygons(data = cd114,
fillColor = ~pal(cd114$placement.mc_libcon_placement_re.2018),
color = "#b2aeae", # you need to use hex colors
fillOpacity = 0.7,
weight = 1,
smoothFactor = 0.2,
popup = popup) %>%
addLegend(pal = pal,
values = cd114$placement.mc_libcon_placement_re.2018,
position = "bottomright",
na.label = "Vacant",
title = "Aldrich-McKelvey Estimated <br> Liberal-Conservative Ideology <br> (2018)")#,
#labFormat = labelFormat(suffix = "%"))
map3
css_fix <- "div.info.legend.leaflet-control br {clear: both; clear: both;}"
map3 <- map3 %>% prependContent(tags$style(type = "text/css", css_fix))
map3 <- frameWidget(map3)
save.image("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
saveWidget(map3, file="legislator_ideology_2018.html")
library(tigris)
library(leaflet)
library(plyr)
library(dplyr)
library(widgetframe)
library(RColorBrewer)
library(htmlwidgets)
library(htmltools)
load("/Users/carlosalgara/Dropbox/Github_Website/calgara.github.io/Rshinyapp/shiny_data/clean_shiny_data.Rdata")
map3
